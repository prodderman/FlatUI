include ../user-profile/user-profile
include ../button/button

mixin messenger({userInfo={}, messages=[], dialed} = {})
  .messenger.js-messenger(userInfo.id = id !== undefined ? `user_chat_${userInfo.id}` : false)&attributes(attributes)
    button.messenger__close.js-messenger__close
    .messenger__header
      .messenger__name.js-messenger__name= userInfo.name
      .messenger__row
        .messenger__user
          +user-profile(userInfo)
    .messenger__body
      .messenger__links
        a(href='/mock-address/change-me' target = '_blank').messenger__link.messenger__link_msg
        a(href='/mock-address/change-me' target = '_blank').messenger__link.messenger__link_photo
      .messenger__chat.js-messenger__chat
        ul.messenger__tape.js-messenger__tape
          each msg in messages
            .messenger__msg-wrap(class= msg.incoming ? 'messenger__msg-wrap_in' : 'messenger__msg-wrap_out')
              .messenger__msg(class= msg.incoming ? 'messenger__msg_in' : 'messenger__msg_out')= msg.text
      .messenger__textarea
        .messenger__input.js-messenger__input(contenteditable='true')= dialed
      .messenger__send
        +button({text: 'replay'}).messenger__btn.js-messenger__btn